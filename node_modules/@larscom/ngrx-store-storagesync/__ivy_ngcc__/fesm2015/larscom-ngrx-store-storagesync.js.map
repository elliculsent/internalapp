{"version":3,"file":"larscom-ngrx-store-storagesync.js","sources":["../../../projects/ngrx-store-storagesync/src/lib/storage-sync/actions.ts","../../../projects/ngrx-store-storagesync/src/lib/storage-sync/rehydrate-state.ts","../../../projects/ngrx-store-storagesync/src/lib/storage-sync/state-sync.ts","../../../projects/ngrx-store-storagesync/src/lib/storage-sync/storage-sync.ts","../../../projects/ngrx-store-storagesync/src/lib/form-sync/form-sync.constants.ts","../../../projects/ngrx-store-storagesync/src/lib/form-sync/providers/form-sync.providers.ts","../../../projects/ngrx-store-storagesync/src/lib/form-sync/store/form.actions.ts","../../../projects/ngrx-store-storagesync/src/lib/form-sync/store/form.selectors.ts","../../../projects/ngrx-store-storagesync/src/lib/form-sync/directives/form-group.directive.ts","../../../projects/ngrx-store-storagesync/src/lib/form-sync/store/form.reducer.ts","../../../projects/ngrx-store-storagesync/src/lib/form-sync/form-sync.module.ts"],"names":[],"mappings":"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","sourcesContent":["export const INIT_ACTION = '@ngrx/store/init';\nexport const INIT_ACTION_EFFECTS = '@ngrx/effects/init';\nexport const UPDATE_ACTION = '@ngrx/store/update-reducers';\n","import { IStorageSyncOptions } from './models/storage-sync-options';\n\nconst dateMatcher = /(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})/;\n\n/**\n * @internal Restores the resolved state from a storage location\n * @param options the configurable options\n * @returns the restored state from the provided storage\n */\nexport const rehydrateState = <T>({\n  storage,\n  storageKeySerializer,\n  features,\n  storageError,\n  version: currentVersion\n}: IStorageSyncOptions<T>): T => {\n  if (currentVersion) {\n    try {\n      const key = storageKeySerializer('version');\n      const version = +storage.getItem(key);\n      if (version < currentVersion) {\n        return null;\n      }\n    } catch (e) {\n      if (storageError) {\n        storageError(e);\n      } else {\n        throw e;\n      }\n    }\n  }\n  const state = features.reduce<T>((acc, curr) => {\n    const { storageKeySerializerForFeature, stateKey, deserialize, storageForFeature } = curr;\n\n    const key = storageKeySerializerForFeature\n      ? storageKeySerializerForFeature(stateKey)\n      : storageKeySerializer(stateKey);\n\n    try {\n      const featureState = storageForFeature ? storageForFeature.getItem(key) : storage.getItem(key);\n      return featureState\n        ? {\n            ...acc,\n            ...{\n              [stateKey]: deserialize\n                ? deserialize(featureState)\n                : JSON.parse(featureState, (_: string, value: string) =>\n                    dateMatcher.test(String(value)) ? new Date(value) : value\n                  )\n            }\n          }\n        : acc;\n    } catch (e) {\n      if (storageError) {\n        storageError(e);\n      } else {\n        throw e;\n      }\n    }\n  }, {} as T);\n  return Object.keys(state).length ? state : null;\n};\n","import { cloneDeep, isPlainObject } from 'lodash-es';\nimport { IStorageSyncOptions } from './models/storage-sync-options';\n\n\n/**\n * @internal Blacklisting\n * @returns the filtered state\n */\nexport const excludeKeysFromState = <T>(state: Partial<T>, excludeKeys?: string[]): Partial<T> => {\n  if (!excludeKeys) {\n    return state;\n  }\n\n  const keyPairs = excludeKeys.map(key => ({\n    rootKey: key.split('.')[0],\n    nestedKey: key.split('.')[1]\n  }));\n\n  for (const key in state) {\n    if (state.hasOwnProperty(key)) {\n      const keyPair = keyPairs.find(pair => pair.rootKey === key);\n      const rootKey = keyPair ? keyPair.rootKey : null;\n      const nestedKey = keyPair ? keyPair.nestedKey : null;\n\n      switch (typeof state[key]) {\n        case 'object': {\n          if (rootKey && !state[key]) {\n            delete state[key];\n          } else if (rootKey && nestedKey) {\n            excludeKeysFromState<T>(state[key], [...excludeKeys, nestedKey]);\n          } else if (rootKey) {\n            delete state[key];\n          } else {\n            excludeKeysFromState<T>(state[key], excludeKeys);\n          }\n          break;\n        }\n        default: {\n          if (rootKey) {\n            delete state[key];\n          }\n        }\n      }\n    }\n  }\n  return state;\n};\n\n/**\n * @internal Remove empty objects from state\n * @returns the cleaned state\n */\nexport const cleanState = <T>(state: Partial<T>): Partial<T> => {\n  for (const key in state) {\n    if (!isPlainObject(state[key])) {\n      continue;\n    }\n\n    cleanState<T>(state[key]);\n\n    if (!Object.keys(state[key]).length) {\n      delete state[key];\n    }\n  }\n  return state;\n};\n\n/**\n * @internal Sync state with storage\n * @param state the next state\n * @param options the configurable options\n * @returns the next state\n */\nexport const stateSync = <T>(\n  state: T,\n  { features, storage, storageKeySerializer, storageError, version: currentVersion }: IStorageSyncOptions<T>\n): T => {\n  if (currentVersion) {\n    try {\n      const key = storageKeySerializer('version');\n      storage.setItem(key, String(currentVersion));\n    } catch (e) {\n      if (storageError) {\n        storageError(e);\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  features\n    .filter(({ stateKey }) => state[stateKey] !== undefined)\n    .filter(({ stateKey, shouldSync }) => (shouldSync ? shouldSync(state[stateKey], state) : true))\n    .forEach(({ stateKey, excludeKeys, storageKeySerializerForFeature, serialize, storageForFeature }) => {\n      const featureState = cloneDeep<Partial<T>>(state[stateKey]);\n      const filteredState = cleanState<T>(excludeKeysFromState<T>(featureState, excludeKeys));\n\n      if (isPlainObject(filteredState) && !Object.keys(filteredState).length) {\n        return;\n      }\n\n      const key = storageKeySerializerForFeature\n        ? storageKeySerializerForFeature(stateKey)\n        : storageKeySerializer(stateKey);\n\n      const value = serialize ? serialize(filteredState) : JSON.stringify(filteredState);\n\n      try {\n        if (storageForFeature) {\n          storageForFeature.setItem(key, value);\n        } else {\n          storage.setItem(key, value);\n        }\n      } catch (e) {\n        if (storageError) {\n          storageError(e);\n        } else {\n          throw e;\n        }\n      }\n    });\n\n  return state;\n};\n","import { Action } from '@ngrx/store';\nimport { merge } from 'lodash-es';\nimport { INIT_ACTION, INIT_ACTION_EFFECTS, UPDATE_ACTION } from './actions';\nimport { IStorageSyncOptions } from './models/storage-sync-options';\nimport { rehydrateState } from './rehydrate-state';\nimport { stateSync } from './state-sync';\n\n/**\n * The StorageSync Meta Reducer for @ngrx/store.\n *\n * @param options The configuration for the meta reducer\n *\n * Check out github for more information.\n * @see https://github.com/larscom/ngrx-store-storagesync\n *\n * @returns the meta reducer function\n */\nexport const storageSync = <T>(options: IStorageSyncOptions<T>) => (\n  reducer: (state: T, action: Action) => T\n): ((state: T, action: Action) => T) => {\n  const config: IStorageSyncOptions<T> = {\n    rehydrate: true,\n    storageKeySerializer: (key: string) => key,\n    rehydrateStateMerger: (nextState, rehydratedState) => merge({}, nextState, rehydratedState),\n    ...options\n  };\n\n  const { rehydrate, rehydrateStateMerger } = config;\n  const revivedState = rehydrate ? rehydrateState<T>(config) : null;\n\n  return (state: T, action: Action): T => {\n    const nextState = action.type === INIT_ACTION ? reducer(state, action) : { ...state };\n    const shouldMerge = revivedState && [INIT_ACTION, UPDATE_ACTION].includes(action.type);\n    const mergedState = reducer(shouldMerge ? rehydrateStateMerger(nextState, revivedState) : nextState, action);\n\n    return [INIT_ACTION, INIT_ACTION_EFFECTS].includes(action.type) ? mergedState : stateSync(mergedState, config);\n  };\n};\n","export const FORM_SYNC_STORE_KEY = 'formSync';\n","import { InjectionToken } from '@angular/core';\nimport { ActionReducer } from '@ngrx/store';\nimport { IFormSyncConfig } from '../models/form-sync-config';\nimport { IFormSyncState } from '../store/form.reducer';\n\nexport const FORM_SYNC_CONFIG = new InjectionToken<IFormSyncConfig>('FORM_SYNC_CONFIG', {\n  factory: () => ({ syncOnSubmit: false, syncRawValue: false, syncValidOnly: false })\n});\n\nexport const FORM_SYNC_REDUCER = new InjectionToken<ActionReducer<IFormSyncState>>('FORM_SYNC_REDUCER');\n","import { createAction, props } from '@ngrx/store';\n\nexport const setForm = createAction('@larscom/form-sync/set', props<{ id: string; value: any }>());\nexport const patchForm = createAction('@larscom/form-sync/patch', props<{ id: string; value: any }>());\nexport const resetForm = createAction('@larscom/form-sync/reset', props<{ id: string }>());\nexport const deleteForm = createAction('@larscom/form-sync/delete', props<{ id: string }>());\n","import { createFeatureSelector, createSelector } from '@ngrx/store';\nimport { FORM_SYNC_STORE_KEY } from '../form-sync.constants';\nimport { IFormSyncState } from './form.reducer';\n\nexport const getFormSyncState = createFeatureSelector<IFormSyncState>(FORM_SYNC_STORE_KEY);\nexport const getFormSyncValue = createSelector(\n  getFormSyncState,\n  (state: IFormSyncState, { id }: { id: string }) => state[id]\n);\n","import { Directive, HostListener, Inject, Input, OnDestroy, OnInit } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { select, Store } from '@ngrx/store';\nimport { Subscription } from 'rxjs';\nimport { filter } from 'rxjs/operators';\nimport { IFormSyncConfig } from '../models/form-sync-config';\nimport { FORM_SYNC_CONFIG } from '../providers/form-sync.providers';\nimport { patchForm } from '../store/form.actions';\nimport { getFormSyncValue } from '../store/form.selectors';\n\n@Directive({\n  selector: '[formGroup]'\n})\nexport class FormGroupDirective implements OnInit, OnDestroy {\n  @Input() formGroup: FormGroup;\n  @Input() formGroupId: string;\n  @Input() formGroupSync = true;\n\n  constructor(@Inject(FORM_SYNC_CONFIG) private readonly config: IFormSyncConfig, private readonly store: Store<any>) {}\n\n  private readonly subscriptions = new Subscription();\n\n  ngOnInit(): void {\n    if (!this.formGroupId) {\n      return;\n    }\n\n    const { syncOnSubmit, syncValidOnly, syncRawValue } = this.config;\n    this.subscriptions.add(\n      this.formGroup.valueChanges\n        .pipe(\n          filter(() => this.formGroupSync),\n          filter(() => !(syncValidOnly && !this.formGroup.valid)),\n          filter(() => !syncOnSubmit)\n        )\n        .subscribe(() => this.dispatch(syncRawValue))\n    );\n\n    this.subscriptions.add(\n      this.store\n        .pipe(\n          filter(() => this.formGroupSync),\n          select(getFormSyncValue, { id: this.formGroupId }),\n          filter(value => value != null)\n        )\n        .subscribe(value => this.formGroup.patchValue(value, { emitEvent: false }))\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n  @HostListener('submit')\n  onSubmit(): void {\n    if (!this.formGroupId || !this.formGroupSync) {\n      return;\n    }\n\n    const { syncOnSubmit, syncValidOnly, syncRawValue } = this.config;\n\n    if (!syncOnSubmit) {\n      return;\n    }\n\n    if (syncValidOnly && !this.formGroup.valid) {\n      return;\n    }\n\n    this.dispatch(syncRawValue);\n  }\n\n  private dispatch(syncRawValue: boolean): void {\n    const value = syncRawValue ? this.formGroup.getRawValue() : this.formGroup.value;\n    this.store.dispatch(patchForm({ id: this.formGroupId, value }));\n  }\n}\n","import { createReducer, on } from '@ngrx/store';\nimport { cloneDeep, isArray, isPlainObject, merge } from 'lodash-es';\n\nimport { deleteForm, patchForm, resetForm, setForm } from './form.actions';\n\nexport interface IFormSyncState {\n  [formGroupId: string]: any;\n}\n\n/**\n * The form sync reducer for @ngrx/store.\n */\n// tslint:disable: no-shadowed-variable\nexport const formSyncReducer = createReducer(\n  Object(),\n  on(setForm, (state, { id, value }) => ({ ...state, [id]: value })),\n  on(patchForm, (state, { id, value }) => merge({}, { ...state }, { [id]: value })),\n  on(resetForm, (state, { id }) => {\n    const reset = (slice: Partial<IFormSyncState>) => {\n      for (const property in slice) {\n        if (!slice.hasOwnProperty(property)) {\n          continue;\n        }\n\n        if (isPlainObject(slice[property])) {\n          reset(slice[property]);\n        } else if (isArray(slice[property])) {\n          Array(slice[property]).forEach(p => reset(p));\n        } else {\n          slice[property] = null;\n        }\n      }\n      return slice;\n    };\n\n    const value = reset(cloneDeep(state[id]));\n\n    return { ...state, [id]: value };\n  }),\n  on(deleteForm, (state, { id }) => ({ ...state, [id]: undefined }))\n);\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\nimport { FormGroupDirective } from './directives/form-group.directive';\nimport { FORM_SYNC_STORE_KEY } from './form-sync.constants';\nimport { FORM_SYNC_REDUCER } from './providers/form-sync.providers';\nimport { formSyncReducer } from './store/form.reducer';\n\n@NgModule({\n  declarations: [FormGroupDirective],\n  imports: [StoreModule.forFeature(FORM_SYNC_STORE_KEY, FORM_SYNC_REDUCER)],\n  exports: [FormGroupDirective]\n})\nexport class FormSyncModule {\n  /**\n   * Import 'FormSyncModule.forRoot()' only once.\n   * Use 'FormSyncModule' for additional imports\n   * inside feature modules.\n   */\n  static forRoot(): ModuleWithProviders<FormSyncModule> {\n    return {\n      ngModule: FormSyncModule,\n      providers: [\n        {\n          provide: FORM_SYNC_REDUCER,\n          useValue: formSyncReducer\n        }\n      ]\n    };\n  }\n}\n"]}